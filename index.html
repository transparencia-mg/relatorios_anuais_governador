<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Julgamento das Contas - Governo de Minas Gerais</title>
    
    <!-- ==================== ESTILOS E BIBLIOTECAS ==================== -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        :root {
            --primary-dark: #29435A;
            --primary-darker: #0E2F44;
            --accent-red: #B93C42;
            --accent-bright: #DB233F;
            --background-light: #EEEFF5;
            --success-green: #28a745;
            --warning-yellow: #ffc107;
            --info-blue: #17a2b8;
        }
        
        body {
            font-family: 'Montserrat', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-light);
            padding-bottom: 30px;
        }

        .main-header {
            background: linear-gradient(135deg, var(--primary-darker) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px 0;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-bottom: 3px solid var(--accent-red);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-red) 0%, var(--accent-bright) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        
        .header-title {
            font-weight: 700;
            font-size: 22px;
            margin: 0;
            line-height: 1.2;
        }
        
        .header-subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .description-area {
            background: white;
            border-radius: 10px;
            padding: 25px 30px;
            margin: 20px 0 25px 0;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
            border-left: 6px solid var(--accent-red);
        }
        
        .description-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-darker);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .description-title .material-icons {
            font-size: 28px;
            color: var(--accent-red);
        }
        
        .description-text {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .description-sub {
            font-size: 0.9rem;
            background-color: var(--background-light);
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #20B2AA;
            margin-top: 15px;
            color: #1e293b;
        }
        
        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }
        
        .table-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-darker) 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .table-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .table-fixed-header-container {
            position: relative;
            max-height: 500px;
            overflow: auto;
        }
        
        .table-fixed-header-container table thead {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: var(--primary-dark) !important;
        }
        
        .table-fixed-header-container table thead th {
            background-color: var(--primary-dark) !important;
            color: white !important;
            position: sticky;
            top: 0;
            z-index: 20;
            border: none;
            padding: 12px 10px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            white-space: nowrap;
        }
        
        .table {
            margin: 0;
            width: 100%;
            font-size: 13px;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .table tbody tr:hover {
            background-color: rgba(41, 67, 90, 0.04);
        }
        
        .table tbody td {
            padding: 12px 10px;
            vertical-align: middle;
            font-size: 13px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .document-link {
            color: var(--primary-darker);
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            border-bottom: 1px dashed var(--accent-red);
        }
        
        .document-link:hover {
            color: var(--accent-red);
            border-bottom-style: solid;
        }
        
        .tag-situacao {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .tag-aprovado {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
        }
        
        .tag-aprovado-ressalvas {
            background-color: rgba(255, 193, 7, 0.15);
            color: #b45b0a;
        }
        
        .tag-em-julgamento {
            background-color: rgba(23, 162, 184, 0.1);
            color: var(--info-blue);
        }
        
        .tag-nao-avaliado {
            background-color: #e9ecef;
            color: #6c757d;
        }
        
        .btn-export {
            background: white;
            border: 2px solid var(--primary-darker);
            color: var(--primary-dark);
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }
        
        .btn-export:hover {
            background: var(--primary-dark);
            color: white;
        }
        
        .data-atualizacao-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .data-atualizacao-box {
            background: white;
            border-radius: 8px;
            padding: 8px 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: var(--primary-dark);
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- ÁREA DE DESCRIÇÃO -->
        <div class="description-area">
            <h2 class="description-title"><i class="material-icons">gavel</i> Julgamento das Contas Anuais do Governador</h2>
            <div class="description-text">
                <p>O julgamento das contas anuais do governador é o procedimento constitucional e legal de fiscalização orçamentária, financeira e patrimonial prestadas pelo chefe do Poder Executivo estadual. Consiste na avaliação técnica e política da gestão do estado durante um exercício financeiro, envolvendo a análise de conformidade com leis, limites fiscais e cumprimento de metas.</p>
            </div>
            <div class="description-sub">
                <i class="material-icons" style="font-size: 18px; margin-right: 8px; vertical-align: middle;">assignment_late</i> 
                Incluem: o Relatório de Controle Interno (CGE), a emissão de Parecer pelo Tribunal de Contas (TCE-MG) e o julgamento das contas pela Comissão de Fiscalização Financeira e Orçamentária da Assembleia Legislativa (ALMG).
            </div>
        </div>

        <!-- DATA DE ATUALIZAÇÃO -->
        <div class="data-atualizacao-container">
            <div class="data-atualizacao-box">
                <span class="material-icons">update</span>
                Atualizado em: <span id="data-atualizacao-header">Carregando...</span>
            </div>
        </div>

        <!-- TABELA DE JULGAMENTO -->
        <div class="table-container">
            <div class="table-header">
                <h3 class="table-title">
                    <i class="material-icons">fact_check</i>
                    Histórico de Julgamento das Contas
                </h3>
                <button class="btn-export" onclick="exportarTabela('tabelaJulgamento')">
                    <i class="material-icons">download</i>
                    Exportar CSV
                </button>
            </div>
            <div class="table-fixed-header-container">
                <table class="table" id="tabelaJulgamento">
                    <thead>
                        <tr>
                            <th>Ano</th>
                            <th>Processo</th>
                            <th>Situação</th>
                            <th>Parecer Prévio TCEMG</th>
                            <th>Julgamento ALMG</th>
                            <th>Relatório CGE</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Os dados serão inseridos via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <p class="text-muted small mt-2">
            <i class="fas fa-info-circle"></i> 
            Dados históricos do TCEMG, ALMG e Controladoria-Geral do Estado.
        </p>
    </div>

    <script>
        // Dados do julgamento das contas
        const dadosJulgamento = [
            { ano: "2024", processo: "1188127", situacao: "Em Julgamento", parecerTCE: "https://www.tce.mg.gov.br/pesquisa_processo.asp?cod_processo=1188127", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=1371:relatorio-de-controle-interno-contas-do-governo-exercicio-de-2024" },
            { ano: "2023", processo: "1167016", situacao: "Em Julgamento", parecerTCE: "https://www.tce.mg.gov.br/pesquisa_processo.asp?cod_processo=1167016", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=1038:relatorio-de-controle-interno-n-1606977-contas-de-governo-do-exercicio-de-2023" },
            { ano: "2022", processo: "1144601", situacao: "Aprovação", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/3810660", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=1039:relatorio-de-controle-interno-n-1439038-contas-de-governo-do-exercicio-de-2022" },
            { ano: "2021", processo: "1114783", situacao: "Aprovação", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/3648160", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=1430:relatorio-de-controle-interno-contas-do-governo-exercicio-de-2021" },
            { ano: "2020", processo: "1101512", situacao: "Aprovado com ressalvas", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/3017473", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=598:relatorio-de-controle-interno-exercicio2020" },
            { ano: "2019", processo: "1088786", situacao: "Aprovado com ressalvas", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/2477146", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=453:relatorio-de-controle-interno-2020" },
            { ano: "2018", processo: "1066559", situacao: "Aprovado com ressalvas", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/2072805", julgamentoALMG: null, relatorioCGE: "https://www.cge.mg.gov.br/auditoria-interna-governamental/relatorios-de-auditoria/category/129-relatorio-de-controle-interno-rci?download=456:relatorio-de-controle-interno-2019" },
            { ano: "2017", processo: "1040601", situacao: "Aprovado com ressalvas", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/1901895", julgamentoALMG: null, relatorioCGE: null },
            { ano: "2016", processo: "1007713", situacao: "Aprovação", parecerTCE: "https://tcnotas.tce.mg.gov.br/tcjuris/Nota/BuscarArquivo/1442342", julgamentoALMG: "https://www.almg.gov.br/legislacao-mineira/texto/RAL/5526/2018/", relatorioCGE: null },
            { ano: "Exercícios anteriores", processo: "", situacao: "", parecerTCE: "https://www.tce.mg.gov.br/noticia/Detalhe/1111625215", julgamentoALMG: "https://www.almg.gov.br/atividade-parlamentar/leis/legislacao-mineira/?pesquisou=true&aba=pesquisa&q=APROVA+AS+CONTAS+DO+GOVERNADOR+DO+ESTADO+EXERC%C3%8DCIO&grupo=&num=&ano=&dataInicio=&dataFim=&sit=&ordem=2", relatorioCGE: null }
        ];

        function renderTabela() {
            const tbody = document.querySelector('#tabelaJulgamento tbody');
            if (!tbody) return;
            
            let html = '';
            dadosJulgamento.forEach(item => {
                let badgeClass = 'tag-situacao ';
                if (item.situacao.includes('Aprovado com ressalvas')) badgeClass += 'tag-aprovado-ressalvas';
                else if (item.situacao.includes('Aprovação')) badgeClass += 'tag-aprovado';
                else if (item.situacao.includes('Em Julgamento')) badgeClass += 'tag-em-julgamento';
                else badgeClass += 'tag-nao-avaliado';
                
                const situacaoBadge = `<span class="${badgeClass}">${item.situacao || '—'}</span>`;
                
                const parecerLink = item.parecerTCE 
                    ? `<a href="${item.parecerTCE}" target="_blank" class="document-link"><i class="fas fa-external-link-alt"></i> Parecer</a>` 
                    : '—';
                    
                const almgLink = item.julgamentoALMG 
                    ? `<a href="${item.julgamentoALMG}" target="_blank" class="document-link"><i class="fas fa-external-link-alt"></i> Julgamento</a>` 
                    : '—';
                    
                const cgeLink = item.relatorioCGE 
                    ? `<a href="${item.relatorioCGE}" target="_blank" class="document-link"><i class="fas fa-external-link-alt"></i> RCI</a>` 
                    : '—';
                
                html += `<tr>
                    <td><strong>${item.ano}</strong></td>
                    <td>${item.processo || '—'}</td>
                    <td>${situacaoBadge}</td>
                    <td>${parecerLink}</td>
                    <td>${almgLink}</td>
                    <td>${cgeLink}</td>
                </tr>`;
            });
            tbody.innerHTML = html;
        }

        function exportarTabela(tabelaId) {
            const tabela = document.getElementById(tabelaId);
            if (!tabela) return;
            
            let csv = [];
            const cabecalhos = [];
            tabela.querySelectorAll('thead th').forEach(th => cabecalhos.push(th.innerText));
            csv.push(cabecalhos.join(';'));
            
            tabela.querySelectorAll('tbody tr').forEach(tr => {
                const linha = [];
                tr.querySelectorAll('td').forEach(td => {
                    let texto = td.innerText.trim().replace(/\n/g, ' ');
                    if (texto.includes(';') || texto.includes('"')) {
                        texto = `"${texto.replace(/"/g, '""')}"`;
                    }
                    linha.push(texto);
                });
                csv.push(linha.join(';'));
            });
            
            const conteudo = csv.join('\n');
            const blob = new Blob(["\uFEFF" + conteudo], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'julgamento-contas.csv';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function atualizarData() {
            const agora = new Date();
            const dataStr = agora.toLocaleDateString('pt-BR') + ' às ' + agora.toLocaleTimeString('pt-BR');
            const el = document.getElementById('data-atualizacao-header');
            if (el) el.textContent = dataStr;
        }

        window.addEventListener('load', () => {
            renderTabela();
            atualizarData();
            setInterval(atualizarData, 60000);
        });
    </script>
</body>
</html>